<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Android | Codist</title>
    <link>https://codist.me/en/tags/android/</link>
      <atom:link href="https://codist.me/en/tags/android/index.xml" rel="self" type="application/rss+xml" />
    <description>Android</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-us</language><copyright>© 2016-2020 Codist</copyright><lastBuildDate>Sat, 11 Jun 2016 19:00:10 +0800</lastBuildDate>
    <image>
      <url>https://codist.me/img/screenshot.png</url>
      <title>Android</title>
      <link>https://codist.me/en/tags/android/</link>
    </image>
    
    <item>
      <title>将Android的系统日志输出到文件</title>
      <link>https://codist.me/en/docs/android-log/</link>
      <pubDate>Sat, 11 Jun 2016 19:00:10 +0800</pubDate>
      <guid>https://codist.me/en/docs/android-log/</guid>
      <description>&lt;ul&gt;
&lt;li&gt;首先，在产品目录的init.XXX.rc文件中，添加相应的service，&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;#start log service
 start logd

on property:service.logcat.enable=1
    start logcat_service

on property:service.logcat.enable=0
    stop logcat_service

#log services
service logcat_service /system/bin/logcat -b system -b events -b main -b radio -k -n 10 -v threadtime -r5000 -f /data/Logs/Log.0/logcat.log

    user root
    group log system
    class main
       disabled

service logd /system/bin/sh /system/bin/logd.sh
    user system
    group log
    oneshot
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;然后，在目标平台的system/bin下添加脚本文件logd.sh，处理存储的log日志，以及设置属性，开启logcat_service,&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;#!/system/bin/sh

#
#Global folder &amp;amp; cmd params
#

OUTPUT_DIR=/data
LOG=Logs
index=2

LOG_DIR[0]=$OUTPUT_DIR/$LOG/Log.0
LOG_DIR[1]=$OUTPUT_DIR/$LOG/Log.1
LOG_DIR[2]=$OUTPUT_DIR/$LOG/Log.2

RM=rm
MV=&amp;quot;mv&amp;quot;
MKDIR=mkdir
UMASK=umask


#set default permission 0775
$UMASK 002

#Init the three folders

i=0
while [ &amp;quot;$i&amp;quot; -le &amp;quot;$index&amp;quot; ]
do
$MKDIR -p ${LOG_DIR[$i]}
i=$(($i+1))
done

#Transfer the three folders
((i=$index-1))
$RM -r ${LOG_DIR[$index]}/*
while [ &amp;quot;$i&amp;quot; -ge &amp;quot;0&amp;quot; ]
do
$MV ${LOG_DIR[$i]}/* ${LOG_DIR[$i+1]}
i=$(($i-1))
done
$RM -r ${LOG_DIR[0]}/*

#start logcat service
setprop service.logcat.enable 1

mkdir /data/www
cp -R /system/var/www/    /data/
ln -s /storage/external/ /data/www/sdcard
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>
