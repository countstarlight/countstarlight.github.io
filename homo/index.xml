<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>概述 on Codist</title>
    <link>https://blog.codist.me/homo/</link>
    <description>Recent content in 概述 on Codist</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator>
    <language>zh-Hans</language>
    <copyright>&amp;copy; 2016-{year} Codist</copyright>
    <lastBuildDate>Thu, 13 Jun 2019 00:00:00 +0800</lastBuildDate>
    
	    <atom:link href="https://blog.codist.me/homo/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>安装</title>
      <link>https://blog.codist.me/homo/get-started/</link>
      <pubDate>Thu, 13 Jun 2019 00:00:00 +0800</pubDate>
      
      <guid>https://blog.codist.me/homo/get-started/</guid>
      <description>

&lt;p&gt;首先获取Homo源码:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/countstarlight/homo.git
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;开始安装依赖&lt;/p&gt;

&lt;h1 id=&#34;1-安装依赖&#34;&gt;1.安装依赖&lt;/h1&gt;

&lt;h2 id=&#34;1-1-系统依赖&#34;&gt;1.1 系统依赖&lt;/h2&gt;

&lt;h3 id=&#34;1-1-1-portaudio&#34;&gt;1.1.1 PortAudio&lt;/h3&gt;

&lt;p&gt;Homo 使用 &lt;code&gt;PortAudio&lt;/code&gt; 从音频硬件读取和处理音频，这个库通常已经被安装&lt;/p&gt;

&lt;p&gt;Debian / Ubuntu:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;sudo apt-get install portaudio
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Arch Linux / Manjaro Linux:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# 需要安装 pulseaudio-alsa 使得和 pulseaudio 一起工作时不会造成崩溃
sudo pacman -S portaudio pulseaudio-alsa
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;1-1-2-pocketsphinx&#34;&gt;1.1.2 PocketSphinx&lt;/h3&gt;

&lt;p&gt;Homo 借助 &lt;code&gt;PocketSphinx&lt;/code&gt; 实现离线唤醒，控制语音录制开始和结束的时机&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;a) 安装 &lt;code&gt;sphinxbase&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;code&gt;PocketSphinx&lt;/code&gt; 依赖 &lt;code&gt;sphinxbase&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Linux / Unix:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/cmusphinx/sphinxbase.git
cd sphinxbase
./autogen.sh
./configure
make -j 4
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;b) 安装 &lt;code&gt;PocketSphinx&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Linux / Unix:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;git clone https://github.com/cmusphinx/pocketsphinx.git
cd pocketsphinx
./autogen.sh
./configure
sudo make install
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;1-2-python依赖&#34;&gt;1.2 Python依赖&lt;/h2&gt;

&lt;p&gt;推荐使用 &lt;code&gt;virtualenv&lt;/code&gt; 为每个项目创建一个独立的python环境&lt;/p&gt;

&lt;p&gt;Python推荐使用&lt;code&gt;3.6.8&lt;/code&gt;版本&lt;/p&gt;

&lt;p&gt;目前自然语言理解和文本情感分析是两个单独的模块，稍后会合并到一起，以简化操作&lt;/p&gt;

&lt;h3 id=&#34;1-2-1-安装文本情感分析引擎的依赖&#34;&gt;1.2.1 安装文本情感分析引擎的依赖&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd homo/sentiment
# 创建一个python3.6的环境
# 需要已经安装有pyhton3.6
virtualenv --python=python3.6 env3.6
# 进入创建的环境
source env3.6/bin/activate
# 安装依赖
pip install -r requirements.txt
# 使用国内镜像
# pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;1-2-2-安装自然语言理解引擎的依赖&#34;&gt;1.2.2 安装自然语言理解引擎的依赖&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd homo/nlu
# 创建一个python3.6的环境
# 需要已经安装有pyhton3.6
virtualenv --python=python3.6 env3.6
# 进入创建的环境
source env3.6/bin/activate
# 安装依赖
pip install -r requirements.txt
# 使用国内镜像
# pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&#34;2-编译主程序&#34;&gt;2.编译主程序&lt;/h1&gt;

&lt;p&gt;这需要你确保已经配置好&lt;a href=&#34;https://golang.org/&#34; target=&#34;_blank&#34;&gt;Go&lt;/a&gt;开发环境:&lt;/p&gt;

&lt;p&gt;Linux:&lt;/p&gt;

&lt;p&gt;从 &lt;a href=&#34;https://golang.org/dl/&#34; target=&#34;_blank&#34;&gt;https://golang.org/dl/&lt;/a&gt;下载 Linux 对应的&lt;code&gt;.tar.gz&lt;/code&gt;文件，假设下载到的是 &lt;code&gt;go1.12.6.linux-amd64.tar.gz&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;# 直接解压缩到 /usr/local
sudo tar -C /usr/local -xzf go1.12.6.linux-amd64.tar.gz
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;编译 &lt;code&gt;homo-webview&lt;/code&gt;：&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cd homo
make webview
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;生成的文件为：&lt;code&gt;homo-webview&lt;/code&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>获取数据</title>
      <link>https://blog.codist.me/homo/datase/</link>
      <pubDate>Thu, 13 Jun 2019 00:00:00 +0800</pubDate>
      
      <guid>https://blog.codist.me/homo/datase/</guid>
      <description>

&lt;p&gt;获取Homo运行所需的数据&lt;/p&gt;

&lt;h2 id=&#34;1-自然语言理解部分&#34;&gt;1. 自然语言理解部分&lt;/h2&gt;

&lt;h3 id=&#34;1-1-中文维基百科mitie模型&#34;&gt;1.1 中文维基百科MITIE模型&lt;/h3&gt;

&lt;p&gt;来自 &lt;a href=&#34;http://www.crownpku.com/2017/07/27/%E7%94%A8Rasa_NLU%E6%9E%84%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E4%B8%AD%E6%96%87NLU%E7%B3%BB%E7%BB%9F.html&#34; target=&#34;_blank&#34;&gt;用Rasa NLU构建自己的中文NLU系统 - 羊肉泡馍与糖蒜&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;下载 &lt;code&gt;total_word_feature_extractor_chi.dat&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;链接：https://pan.baidu.com/s/1kNENvlHLYWZIddmtWJ7Pdg 密码：p4vx
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;放置到 &lt;code&gt;homo/nlu/data/rasa/total_word_feature_extractor_chi.dat&lt;/code&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>配置</title>
      <link>https://blog.codist.me/homo/config/</link>
      <pubDate>Thu, 13 Jun 2019 23:15:58 +0800</pubDate>
      
      <guid>https://blog.codist.me/homo/config/</guid>
      <description>

&lt;p&gt;Homo 的示例配置文件在 &lt;code&gt;conf/example_app.ini&lt;/code&gt;，在运行前，需要拷贝一份到同目录下的 &lt;code&gt;app.ini&lt;/code&gt;:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;cp conf/example_app.ini conf/app.ini
&lt;/code&gt;&lt;/pre&gt;

&lt;div class=&#34;alert alert-note&#34;&gt;
  &lt;div&gt;
    注意：一般情况下&lt;strong&gt;不需要&lt;/strong&gt;修改配置文件&lt;code&gt;app.ini&lt;/code&gt;，程序在每次启动时都会对未填的项用默认配置填充
  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&#34;配置文件各参数介绍&#34;&gt;配置文件各参数介绍&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&#34;language-ini&#34;&gt;[portaudio]
; PocketSphinx 将 PortAudio 录制到的原始音频(16kHz)存储在这个路径下
; 默认值: tmp/record
RAW_DIR =
; 保存用于语音识别的临时文件名
; 默认值: tmp/record/input.pcm
INPUT_RAW =
; 保存用于语音识别的临时文件编码成的wav文件名
; 默认值: tmp/record/input.wav
INPUT_WAV =

[sphinx]
; 英文 hmm 模型路径
; 默认值: sphinx/en-us/en-us
EN_HMM_DIR =
; 英文词典路径
; 默认值: sphinx/homo/homo.dic
EN_DICT_FILE =
; English lm model path, default: sphinx/homo/homo.lm.bin
EN_LM_FILE =
; Threshold for speech recognition, default: 50000
RECORD_THRESHOLD =
; Save sphinx log to this file, default: log/sphinx.log
LOG_FILE =

[nlu]
; Conversations api, default: http://localhost:5005/conversations/default/respond
CONVERSATION_API =
; Parse api, default: http://localhost:5000/parse
PARSE_API =
; Project for nlu, default: rasa
PROJECT =
; Model for nlu, default: ini
MODEL =

[baidu]
; baidu asr api, default: http://vop.baidu.com/server_api
ASR_API =
; baidu tts api, default: http://tsn.baidu.com/text2audio
TTS_API =
; baidu voice service auth url, default: https://openapi.baidu.com/oauth/2.0/token
VOICE_AUTH_URL =
; key for baidu voice api, default: MDNsII2jkUtbF729GQOZt7FS
VOICE_API_KEY =
; secret for baidu voice api, default: 0vWCVCLsbWHMSH1wjvxaDq4VmvCZM2O9
VOICE_API_SECRET =

[tts]
; Output tts audio file to this path, default: tmp/tts
TTS_DIR =
; Output tts audio file path, default: tmp/tts/tmp.wav
TTS_OUT_FILE =
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
  </channel>
</rss>
